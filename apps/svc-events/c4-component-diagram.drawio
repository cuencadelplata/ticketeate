<mxfile host="app.diagrams.net" modified="2024-01-15T10:00:00.000Z" agent="5.0" etag="abc123" version="22.1.16" type="device">
  <diagram name="C4-Component" id="c4-component">
    <mxGraphModel dx="1422" dy="754" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Sistema de Eventos - Diagrama de Componentes C4 (Event Service)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="20" width="500" height="30" as="geometry" />
        </mxCell>
        
        <!-- External Actors -->
        <mxCell id="client" value="Cliente Web&#xa;(Next.js Frontend)" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="200" width="80" height="120" as="geometry" />
        </mxCell>
        
        <!-- System Boundary -->
        <mxCell id="system-boundary" value="Sistema de Gestión de Eventos (svc-events)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="150" width="1200" height="700" as="geometry" />
        </mxCell>
        
        <!-- Lambda Handler Container -->
        <mxCell id="lambda-container" value="AWS Lambda Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="200" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Hono App Container -->
        <mxCell id="hono-container" value="Hono Application" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="200" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Services Container -->
        <mxCell id="services-container" value="Business Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="950" y="200" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Data Layer Container -->
        <mxCell id="data-container" value="Data Access Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="450" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Config Container -->
        <mxCell id="config-container" value="Configuration Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="450" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- External Services Container -->
        <mxCell id="external-container" value="External Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="950" y="450" width="300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Lambda Handler Components -->
        <mxCell id="lambda-handler" value="Lambda Handler&#xa;(lambda.ts)&#xa;&#xa;• handle() function&#xa;• AWS Lambda integration&#xa;• Request/Response mapping" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="270" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="index-entry" value="Index Entry&#xa;(index.ts)&#xa;&#xa;• App initialization&#xa;• Route mounting&#xa;• Middleware setup" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Hono App Components -->
        <mxCell id="hono-app" value="Hono App&#xa;(app.ts)&#xa;&#xa;• CORS middleware&#xa;• Logging middleware&#xa;• Timing middleware&#xa;• Error handling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="api-routes" value="API Routes&#xa;(routes/api.ts)&#xa;&#xa;• Clerk authentication&#xa;• User management&#xa;• Protected routes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="760" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="events-routes" value="Events Routes&#xa;(routes/events.ts)&#xa;&#xa;• Event CRUD operations&#xa;• Image upload&#xa;• Public/Private events&#xa;• Data validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="320" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="health-routes" value="Health Routes&#xa;(routes/health.ts)&#xa;&#xa;• Health checks&#xa;• Readiness checks&#xa;• Liveness checks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="760" y="320" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Services Components -->
        <mxCell id="event-service" value="Event Service&#xa;(services/event-service.ts)&#xa;&#xa;• createEvent()&#xa;• getEventById()&#xa;• getUserEvents()&#xa;• getAllPublicEvents()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="970" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="image-service" value="Image Upload Service&#xa;(services/image-upload.ts)&#xa;&#xa;• uploadImage()&#xa;• deleteImage()&#xa;• Image optimization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1110" y="230" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="types" value="Types&#xa;(types/index.ts)&#xa;&#xa;• User interface&#xa;• ApiResponse interface&#xa;• HealthStatus interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="970" y="320" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Data Layer Components -->
        <mxCell id="prisma-client" value="Prisma Client&#xa;(config/prisma.ts)&#xa;&#xa;• Database connection&#xa;• ORM operations&#xa;• Type-safe queries" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="270" y="480" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="database-schema" value="Database Schema&#xa;(Prisma Schema)&#xa;&#xa;• Evento model&#xa;• ImagenEvento model&#xa;• FechaEvento model&#xa;• CategoriaEntrada model" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="410" y="480" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Config Components -->
        <mxCell id="cloudinary-config" value="Cloudinary Config&#xa;(config/cloudinary.ts)&#xa;&#xa;• API configuration&#xa;• Image transformations&#xa;• Asset management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="480" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="env-config" value="Environment Config&#xa;(env.example)&#xa;&#xa;• Database URLs&#xa;• API Keys&#xa;• Service endpoints" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="760" y="480" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- External Services -->
        <mxCell id="clerk-auth" value="Clerk&#xa;Authentication" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="970" y="480" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="cloudinary-cdn" value="Cloudinary&#xa;CDN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1070" y="480" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="postgresql" value="PostgreSQL&#xa;Database" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1170" y="480" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="aws-lambda-runtime" value="AWS Lambda&#xa;Runtime" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="970" y="560" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Internal Relationships -->
        <mxCell id="rel1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="lambda-handler" target="index-entry">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="270" as="sourcePoint" />
            <mxPoint x="450" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="index-entry" target="hono-app">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="270" as="sourcePoint" />
            <mxPoint x="600" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hono-app" target="api-routes">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="270" as="sourcePoint" />
            <mxPoint x="800" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="hono-app" target="events-routes">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="330" as="sourcePoint" />
            <mxPoint x="680" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel5" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="api-routes" target="health-routes">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="820" y="330" as="sourcePoint" />
            <mxPoint x="820" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel6" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="events-routes" target="event-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="360" as="sourcePoint" />
            <mxPoint x="800" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel7" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="events-routes" target="image-service">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="360" as="sourcePoint" />
            <mxPoint x="1000" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="event-service" target="prisma-client">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1030" y="330" as="sourcePoint" />
            <mxPoint x="330" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="image-service" target="cloudinary-config">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1170" y="330" as="sourcePoint" />
            <mxPoint x="680" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel10" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="prisma-client" target="database-schema">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="520" as="sourcePoint" />
            <mxPoint x="450" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- External Relationships -->
        <mxCell id="rel11" value="HTTPS" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="client" target="lambda-handler">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="260" as="sourcePoint" />
            <mxPoint x="190" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel12" value="Auth" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.2;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="api-routes" target="clerk-auth">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="890" y="250" as="sourcePoint" />
            <mxPoint x="950" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel13" value="Upload" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.4;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cloudinary-config" target="cloudinary-cdn">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="520" as="sourcePoint" />
            <mxPoint x="950" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel14" value="Query" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.6;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="prisma-client" target="postgresql">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="540" as="sourcePoint" />
            <mxPoint x="1150" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel15" value="Execute" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.8;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="lambda-handler" target="aws-lambda-runtime">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="320" as="sourcePoint" />
            <mxPoint x="950" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="Leyenda:&#xa;• Componentes internos&#xa;• Servicios externos&#xa;• Flujo de datos&#xa;• Dependencias" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="200" height="100" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>



